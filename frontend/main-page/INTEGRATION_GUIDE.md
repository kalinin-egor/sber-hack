# Руководство по интеграции главной страницы

## Обзор изменений

Главная страница была успешно переделана с использованием компонентов из `sber-hack/frontend/main-page/main` и интегрирована с системой авторизации и новыми API endpoints.

## Ключевые изменения

### 1. Структура приложения
- **Главная страница**: `src/presentation/components/App.tsx`
- **Авторизация**: Интегрирована с существующей системой авторизации
- **UI компоненты**: Скопированы из `main/src/components/ui/`

### 2. Компоненты
- `AudioAnalyzer.tsx` - Анализ аудио с выбором животного
- `AnimalManagement.tsx` - Управление животными и транскрипциями  
- `AuthPage.tsx` - Страница авторизации с формами входа/регистрации

### 3. API интеграция
Создан новый сервис `AnimalsService.ts` для работы с endpoints:

#### Авторизация
- `POST /v1/auth/register` - Регистрация пользователя
- `POST /v1/auth/confirm-registration` - Подтверждение регистрации
- `POST /v1/auth/login` - Вход в систему
- `POST /v1/auth/refresh-token` - Обновление токена

#### Управление животными
- `POST /v1/animals/` - Создание животного
- `GET /v1/animals/` - Получение списка животных
- `GET /v1/animals/{id}` - Получение животного по ID
- `PUT /v1/animals/{id}` - Обновление животного
- `DELETE /v1/animals/{id}` - Удаление животного
- `GET /v1/animals/{id}/transcriptions` - Получение животного с транскрипциями

#### Обработка аудио
- `POST /v1/animals/transcriptions` - Создание транскрипции
- `POST /v1/animals/audio/process` - Обработка аудио файла
- `GET /v1/animals/types/list` - Получение типов животных
- `GET /v1/animals/search/by-name` - Поиск по имени

## Функциональность

### Авторизация
1. **Вход в систему**: Email + пароль
2. **Регистрация**: Email + имя пользователя + пароль
3. **Подтверждение**: Код из email
4. **Автоматический выход**: Кнопка выхода в шапке

### Главная страница (после авторизации)
1. **Шапка**: Информация о пользователе и кнопка выхода
2. **Статистика**: Динамические карточки с данными
3. **Табы**: 
   - Анализ аудио
   - Управление животными

### Анализ аудио
1. **Выбор животного**: Обязательное поле из списка
2. **Загрузка файла**: Поддержка аудио форматов
3. **Запись аудио**: Встроенный рекордер с визуализацией
4. **Обработка**: Прогресс-бар и результаты анализа

### Управление животными
1. **Создание**: Диалог создания нового животного
2. **Список**: Карточки с информацией о животных
3. **Поиск**: Фильтрация по имени и виду
4. **Детали**: Просмотр транскрипций животного
5. **Статистика**: Общая статистика по животным

## Технические детали

### Типы данных
```typescript
interface TranscriptionResult {
  text: string;
  confidence: number;
  timestamp: string;
  duration: number;
  language: string;
  animalName: string;
}

interface Animal {
  id: string;
  name: string;
  species: string;
  emoji: string;
  createdAt: string;
  transcriptionsCount: number;
  lastActivity?: string;
}
```

### Сервисы
- `AuthService` - Работа с авторизацией
- `AnimalsService` - Работа с животными и аудио

### Состояние
- `AuthContext` - Глобальное состояние авторизации
- Локальное состояние компонентов для UI

## Установка и запуск

1. Убедитесь, что установлены зависимости:
```bash
npm install react motion lucide-react
```

2. Обновите конфигурацию API в `src/shared/constants/environment.ts`

3. Запустите проект:
```bash
npm run dev
```

## Особенности реализации

1. **Адаптивность**: Все компоненты адаптированы под мобильные устройства
2. **Анимации**: Использует Framer Motion для плавных переходов
3. **Типизация**: Полная типизация TypeScript
4. **Обработка ошибок**: Централизованная обработка ошибок API
5. **Аутентификация**: JWT токены с автообновлением

## Следующие шаги

1. Настроить подключение к реальному backend API
2. Добавить обработку ошибок сети
3. Реализовать кэширование данных
4. Добавить unit тесты
5. Оптимизировать производительность

## Заключение

Интеграция успешно завершена. Главная страница теперь использует компоненты из `main` директории и полностью интегрирована с системой авторизации и API endpoints для работы с животными.
